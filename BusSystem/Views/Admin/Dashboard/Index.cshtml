@{
    ViewData["Title"] = "Dashboard";
    Layout = "~/Views/Admin/Shared/_Layout.cshtml";
}

@inject IJsonHelper Json

@using BusSystem.Model.User;
<div class="container-lg">
    <div class="row">
        <div class="col-sm-6 col-lg-3">
            <div class="card mb-4 text-white bg-primary">
                <div class="card-body pb-0 d-flex justify-content-between align-items-start">
                    <div>
                        <div class="fs-4 fw-semibold">
                            @ViewBag.totalTras$
                        </div>
                        <div>Total Transaction Money</div>
                    </div>

                </div>
                <div class="c-chart-wrapper mt-3 mx-3" style="height:70px;">
                    <canvas class="chart" id="card-chart1" height="70" width="272" style="display: block; box-sizing: border-box; height: 70px; width: 272px;"></canvas>
                    <div class="chartjs-tooltip" style="opacity: 0; left: 239.333px; top: 129.847px;"><table style="margin: 0px;"><thead class="chartjs-tooltip-header"><tr class="chartjs-tooltip-header-item" style="border-width: 0px;"><th style="border-width: 0px;">June</th></tr></thead><tbody class="chartjs-tooltip-body"><tr class="chartjs-tooltip-body-item"><td style="border-width: 0px;"><span style="background: rgb(50, 31, 219); border-color: rgba(255, 255, 255, 0.55); border-width: 2px; margin-right: 10px; height: 10px; width: 10px; display: inline-block;"></span>My First dataset: 55</td></tr></tbody></table></div>
                </div>
            </div>
        </div>

        <div class="col-sm-6 col-lg-3">
            <div class="card mb-4 text-white bg-info">
                <div class="card-body pb-0 d-flex justify-content-between align-items-start">
                    <div>
                        <div class="fs-4 fw-semibold">
                            @ViewBag.totalCustomer
                        </div>
                        <div>Total Customer</div>
                    </div>
                </div>
                <div class="c-chart-wrapper mt-3 mx-3" style="height:70px;">
                    <canvas class="chart" id="card-chart2" height="70" width="272" style="display: block; box-sizing: border-box; height: 70px; width: 272px;"></canvas>
                    <div class="chartjs-tooltip" style="opacity: 0; left: 283px; top: 130.25px;"><table style="margin: 0px;"><thead class="chartjs-tooltip-header"><tr class="chartjs-tooltip-header-item" style="border-width: 0px;"><th style="border-width: 0px;">July</th></tr></thead><tbody class="chartjs-tooltip-body"><tr class="chartjs-tooltip-body-item"><td style="border-width: 0px;"><span style="background: rgb(51, 153, 255); border-color: rgba(255, 255, 255, 0.55); border-width: 2px; margin-right: 10px; height: 10px; width: 10px; display: inline-block;"></span>My First dataset: 11</td></tr></tbody></table></div>
                </div>
            </div>
        </div>

        <div class="col-sm-6 col-lg-3">
            <div class="card mb-4 text-white bg-warning">
                <div class="card-body pb-0 d-flex justify-content-between align-items-start">
                    <div>
                        <div class="fs-4 fw-semibold">
                            @ViewBag.totalPartner
                        </div>
                        <div>Total Partner</div>
                    </div>

                </div>
                <div class="c-chart-wrapper mt-3" style="height:70px;">
                    <canvas class="chart" id="card-chart3" height="70" width="304" style="display: block; box-sizing: border-box; height: 70px; width: 304px;"></canvas>
                    <div class="chartjs-tooltip" style="opacity: 0; left: 202.667px; top: 138.2px;"><table style="margin: 0px;"><thead class="chartjs-tooltip-header"><tr class="chartjs-tooltip-header-item" style="border-width: 0px;"><th style="border-width: 0px;">May</th></tr></thead><tbody class="chartjs-tooltip-body"><tr class="chartjs-tooltip-body-item"><td style="border-width: 0px;"><span style="background: rgba(255, 255, 255, 0.2); border-color: rgba(255, 255, 255, 0.55); border-width: 2px; margin-right: 10px; height: 10px; width: 10px; display: inline-block;"></span>My First dataset: 34</td></tr></tbody></table></div>
                </div>
            </div>
        </div>

        <div class="col-sm-6 col-lg-3">
            <div class="card mb-4 text-white bg-danger">
                <div class="card-body pb-0 d-flex justify-content-between align-items-start">
                    <div>
                        <div class="fs-4 fw-semibold">
                            @ViewBag.totalOrder
                        </div>
                        <div>Total Order</div>
                    </div>

                </div>
                <div class="c-chart-wrapper mt-3 mx-3" style="height:70px;">
                    <canvas class="chart" id="card-chart4" height="70" width="272" style="display: block; box-sizing: border-box; height: 70px; width: 272px;"></canvas>
                    <div class="chartjs-tooltip" style="opacity: 0; left: 143.5px; top: 102.5px;"><table style="margin: 0px;"><thead class="chartjs-tooltip-header"><tr class="chartjs-tooltip-header-item" style="border-width: 0px;"><th style="border-width: 0px;">August</th></tr></thead><tbody class="chartjs-tooltip-body"><tr class="chartjs-tooltip-body-item"><td style="border-width: 0px;"><span style="background: rgba(255, 255, 255, 0.2); border-color: rgba(255, 255, 255, 0.55); border-width: 2px; margin-right: 10px; height: 10px; width: 10px; display: inline-block;"></span>My First dataset: 85</td></tr></tbody></table></div>
                </div>
            </div>
        </div>

    </div>

    <div class="card">
        <div class="card-header">
            <span>Chart </span>
        </div>
        <div class="card-body">
            <div id="chartz">

            </div>
        </div>
    </div>

    <div class="card">
        <div class="card-header">
            <span>Top 5 Partner</span>
        </div>
        <div class="card-body">
            <div class="table-responsive">
                <table class="table border mb-0">
                    <thead class="table-light fw-semibold">
                        <tr class="align-middle">
                            <th class="text-center">
                                <svg class="icon">
                                    <use xlink:href="vendors/coreui/icons/svg/free.svg#cil-people"></use>
                                </svg>
                            </th>
                            <th>Username</th>
                            <th class="text-center">Amount</th>
                            <th class="text-center">Email</th>
                        </tr>
                    </thead>
                    <tbody>
                        @foreach (PartnerUserViewModel item in ViewBag.top10)
                        {
                            <tr class="align-middle">
                                <td class="text-center">
                                    <div class="avatar avatar-md">
                                        <img class="avatar-img" src="~/admin/assets/img/avatars/1.jpg" alt="user@email.com"><span class="avatar-status bg-success"></span>
                                    </div>
                                </td>
                                <td class="text-align: left;">@item.Username </td>
                                <td class="text-center">@item.Amount$ </td>
                                <td class="text-center">@item.Email </td>
                            </tr>
                        }
                    </tbody>
                </table>
            </div>
        </div>
    </div>

</div>
<script>
    var dataChart = @Json.Serialize(ViewBag.chart);
</script>
@section scripts {
    <script>
        var cate = [];
        var seri1 = [];
        var seri2 = [];
        $.each(dataChart['seri1'], function (index, value) {
            cate.push(value['date']);
            seri1.push(value['count']);
        });
        $.each(dataChart['seri2'], function (index, value) {
            seri2.push(value['count']);
        });
        var options = {
            series: [{
                name: 'Order',
                data: seri1
            }, {
                name: 'Order Cancel',
                data: seri2
            }],
            chart: { height: 420, type: "line", zoom: { enabled: !1 } },

            stroke: { width: 2 },
            dataLabels: { enabled: !1 },
            colors: ["#4D7FF8", "#FFC400"],

            xaxis: {
                categories: cate
            },
            
        };

        var chart = new ApexCharts(document.querySelector("#chartz"), options);
        chart.render();
    </script>
}